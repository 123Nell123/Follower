package src.com.np.dao;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;

import src.com.np.domaine.Conseiller;
import src.com.np.infra.ConnexionDB;

public class ConseillerDao {
	
	Statement st;
	ResultSet rs;
	Connection cn;
	
	public int authentifierConseiller(Conseiller conseiller){
		
		ConnexionDB connexion = new ConnexionDB();
	   cn =	connexion.getConnexion();
		
		try {
			
			st = cn.createStatement();

			String sql = "SELECT * FROM `conseiller` where  login = '" + conseiller.getLogin() + "' and password = '"
					+ conseiller.getPassword() + "'";

			rs = st.executeQuery(sql);

			if (rs.wasNull())
				a = false;
			else
				a = true;
			System.out.println(a);
		} catch (SQLException e) {
			e.printStackTrace();
		}
		 try {
			conseiller0.setIdConseiller(rs.getInt("id_conseiller"));
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		 int Id = conseiller0.getIdConseiller();
		 System.out.println("essai de Id"+ Id);
		Db.deconnexionBd();
		
		return Id;
		
	}
}
